k8s_yaml('./auth/deployments/frontend-auth.yaml')

k8s_resource("frontend-auth", port_forwards="3001", labels=["auth"])

docker_build(
  'frontend-auth', 
  context='.',
  dockerfile='./auth/Dockerfile.dev',
  live_update=[
    sync('./', '/usr/src/app'),
    run('cd /usr/src/app/auth && yarn install', trigger=['./auth/package.json', './auth/yarn.lock']),
    run('cd /usr/src/app && yarn install', trigger=['./package.json', './yarn.lock']),
  ]
)